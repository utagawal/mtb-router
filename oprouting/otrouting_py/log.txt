
1 - ['europe', 'france', 'rhone-alpes']



------------------------------------------------------------------------------
------------------------------------------------------------------------------
------------------------------------------------------------------------------
deal with ['europe', 'france', 'rhone-alpes'] 1/1
------------------------------------------------------------------------------
initialisation
------------------------------------------------------------------------------
2022-06-29 15:22:12
    DROP TABLE IF EXISTS _work_otrouting_osm_nodes_ninter
    DROP TABLE IF EXISTS planet_osm_*
    CREATE EXTENSION IF NOT EXISTS postgis
        ('POSTGIS="3.2.0 c3e3cc0" [EXTENSION] PGSQL="140" GEOS="3.10.2-CAPI-1.16.0" PROJ="8.2.1" LIBXML="2.9.12" LIBJSON="0.15" LIBPROTOBUF="1.3.3" WAGYU="0.5.0 (Internal)"',)
    CREATE EXTENSION IF NOT EXISTS pgrouting
        ('3.3.0',)
    CREATE TABLE IF NOT EXISTS otrouting_master
    CREATE INDEX IF NOT EXISTS otrouting_master_status
    CREATE INDEX IF NOT EXISTS otrouting_master_geom_polygon
    CREATE TABLE IF NOT EXISTS otrouting_points
    CREATE INDEX IF NOT EXISTS otrouting_points_id
    CREATE INDEX IF NOT EXISTS otrouting_points_id_master
    CREATE INDEX IF NOT EXISTS otrouting_points_geom_point_gist
    CREATE TABLE IF NOT EXISTS otrouting_ways
    CREATE INDEX IF NOT EXISTS otrouting_ways_geom_center_gist
    CREATE INDEX IF NOT EXISTS otrouting_ways_id_master
    CREATE INDEX IF NOT EXISTS otrouting_ways_factor_pedestrian
    CREATE INDEX IF NOT EXISTS otrouting_ways_factor_mountainbike
    CREATE INDEX IF NOT EXISTS otrouting_ways_factor_roadcycle
    CREATE INDEX IF NOT EXISTS otrouting_ways_factor_car
    CREATE TABLE IF NOT EXISTS _work_otrouting_osm_nodes_ninter

upload data from download.geofabrik.de - ['europe', 'france', 'rhone-alpes'] 1/1
------------------------------------------------------------------------------
2022-06-29 15:22:13

update master database - ['europe', 'france', 'rhone-alpes'] 1/1
------------------------------------------------------------------------------
2022-06-29 15:22:13

import osm data with osm2pgsql - ['europe', 'france', 'rhone-alpes'] 1/1
------------------------------------------------------------------------------
2022-06-29 15:22:14
    > subprocess.check_output(['osm2pgsql', '--slim', '-C', '4096', '-d', 'db_osm_routing', '-U', 'user', '-H', 'localhost', '-P', '5432', '/srv/projects/mtb-router/scripts/rhone-alpes-latest.osm.pbf'])
        start: 2022-06-29 15:22:14
        end: 2022-06-29 16:12:28

read osm data and populate _work_otrouting_osm_nodes_ninter table - ['europe', 'france', 'rhone-alpes'] 1/1
------------------------------------------------------------------------------
2022-06-29 16:12:29
    Connect DataBase
    5959425 entries in planet_osm_ways table
    select planet_osm_ways table entries
    START PROCESSING
        0 %   -   0s
        1 %   -   1177s
        2 %   -   1611s
        3 %   -   1885s
        4 %   -   1916s
        5 %   -   1920s
        6 %   -   1924s
        7 %   -   1937s
        8 %   -   1948s
        9 %   -   1954s
        10 %   -   1966s
        11 %   -   1978s
        12 %   -   2012s
        13 %   -   2049s
        14 %   -   2088s
        15 %   -   2128s
        16 %   -   2142s
        17 %   -   2166s
        18 %   -   2182s
        19 %   -   2219s
        20 %   -   2263s
        21 %   -   2353s
        22 %   -   2410s
        23 %   -   2491s
        24 %   -   2535s
        25 %   -   2594s
        26 %   -   2677s
        27 %   -   2764s
        28 %   -   2799s
        29 %   -   2863s
        30 %   -   2935s
        31 %   -   2973s
        32 %   -   2997s
        33 %   -   3034s
        34 %   -   3082s
        35 %   -   3184s
        36 %   -   3245s
        37 %   -   3339s
        38 %   -   3385s
        39 %   -   3443s
        40 %   -   3597s
        41 %   -   3723s
        42 %   -   3833s
        43 %   -   3913s
        44 %   -   4041s
        45 %   -   4108s
        46 %   -   4219s
        47 %   -   4372s
        48 %   -   4620s
        49 %   -   4709s
        50 %   -   4808s
        51 %   -   4937s
        52 %   -   5030s
        53 %   -   5218s
        54 %   -   5321s
        55 %   -   5479s
        56 %   -   5664s
        57 %   -   5722s
        58 %   -   5866s
        59 %   -   5956s
        60 %   -   6163s
        61 %   -   6347s
        62 %   -   6507s
        63 %   -   6581s
        64 %   -   6728s
        65 %   -   6895s
        66 %   -   7090s
        67 %   -   7431s
        68 %   -   7758s
        69 %   -   7917s
        70 %   -   8118s
        71 %   -   8432s
        72 %   -   8803s
        73 %   -   8904s
        74 %   -   9295s
        75 %   -   9702s
        76 %   -   9921s
        77 %   -   10210s
        78 %   -   10429s
        79 %   -   10648s
        80 %   -   10889s
        81 %   -   10988s
        82 %   -   11303s
        83 %   -   11766s
        84 %   -   12070s
        85 %   -   12446s
        86 %   -   12691s
        87 %   -   12987s
        88 %   -   13297s
        89 %   -   13774s
        90 %   -   14127s
        91 %   -   14510s
        92 %   -   14918s
        93 %   -   15295s
        94 %   -   15674s
        95 %   -   16130s
        96 %   -   16529s
        97 %   -   16944s
        98 %   -   17311s
        99 %   -   17783s
        100 %   -   18131s
    ALL ROWS READ IN 18237s

read osm data and populate otrouting_ways table - ['europe', 'france', 'rhone-alpes'] 1/1
------------------------------------------------------------------------------
2022-06-29 21:17:03
    5959425 entries in planet_osm_ways table
    select planet_osm_ways table entries
    START PROCESSING
        0 %   -   0s
        1 %   -   501s
        2 %   -   653s
        3 %   -   732s
        4 %   -   743s
        5 %   -   758s
        6 %   -   764s
        7 %   -   769s
        8 %   -   774s
        9 %   -   778s
        10 %   -   783s
        11 %   -   786s
        12 %   -   794s
        13 %   -   805s
        14 %   -   815s
        15 %   -   828s
        16 %   -   834s
        17 %   -   841s
        18 %   -   847s
        19 %   -   859s
        20 %   -   873s
        21 %   -   899s
        22 %   -   915s
        23 %   -   946s
        24 %   -   958s
        25 %   -   974s
        26 %   -   995s
        27 %   -   1018s
        28 %   -   1027s
        29 %   -   1044s
        30 %   -   1063s
        31 %   -   1074s
        32 %   -   1081s
        33 %   -   1090s
        34 %   -   1103s
        35 %   -   1127s
        36 %   -   1142s
        37 %   -   1165s
        38 %   -   1175s
        39 %   -   1188s
        40 %   -   1223s
        41 %   -   1251s
        42 %   -   1272s
        43 %   -   1288s
        44 %   -   1312s
        45 %   -   1326s
        46 %   -   1346s
        47 %   -   1376s
        48 %   -   1420s
        49 %   -   1441s
        50 %   -   1462s
        51 %   -   1487s
        52 %   -   1507s
        53 %   -   1543s
        54 %   -   1563s
        55 %   -   1591s
        56 %   -   1624s
        57 %   -   1635s
        58 %   -   1660s
        59 %   -   1679s
        60 %   -   1735s
        61 %   -   1766s
        62 %   -   1793s
        63 %   -   1806s
        64 %   -   1831s
        65 %   -   1860s
        66 %   -   1888s
        67 %   -   1938s
        68 %   -   1984s
        69 %   -   2007s
        70 %   -   2033s
        71 %   -   2067s
        72 %   -   2113s
        73 %   -   2124s
        74 %   -   2166s
        75 %   -   2211s
        76 %   -   2233s
        77 %   -   2261s
        78 %   -   2283s
        79 %   -   2306s
        80 %   -   2332s
        81 %   -   2342s
        82 %   -   2373s
        83 %   -   2414s
        84 %   -   2443s
        85 %   -   2472s
        86 %   -   2494s
        87 %   -   2521s
        88 %   -   2547s
        89 %   -   2581s
        90 %   -   2608s
        91 %   -   2635s
        92 %   -   2668s
        93 %   -   2700s
        94 %   -   2736s
        95 %   -   2773s
        96 %   -   2802s
        97 %   -   2831s
        98 %   -   2854s
        99 %   -   2880s
        100 %   -   2905s
    ALL ROWS READ IN 2905s

update master database - ['europe', 'france', 'rhone-alpes'] 1/1
------------------------------------------------------------------------------
2022-06-29 22:11:05
    UPDATE otrouting_master table new row
        log:
imported with ot_routing_v1.3.py
1945765 rows inserted into TABLE otrouting_ways
1553615 rows inserted into TABLE otrouting_points
    Delete obsolete data from otrouting_ways and otrouting_points TABLE
        DELETE FROM otrouting_ways WHERE id_master=1
        DELETE FROM otrouting_points WHERE id_master=1
        UPDATE otrouting_master SET status='obsolete' WHERE id=1
        DELETE FROM otrouting_ways WHERE id_master=2
        DELETE FROM otrouting_points WHERE id_master=2
        UPDATE otrouting_master SET status='obsolete' WHERE id=2
        DELETE FROM otrouting_ways WHERE id_master=3
        DELETE FROM otrouting_points WHERE id_master=3
        UPDATE otrouting_master SET status='obsolete' WHERE id=3
        DELETE FROM otrouting_ways WHERE id_master=4
        DELETE FROM otrouting_points WHERE id_master=4
        UPDATE otrouting_master SET status='obsolete' WHERE id=4
        DELETE FROM otrouting_ways WHERE id_master=5
        DELETE FROM otrouting_points WHERE id_master=5
        UPDATE otrouting_master SET status='obsolete' WHERE id=5
        DELETE FROM otrouting_ways WHERE id_master=6
        DELETE FROM otrouting_points WHERE id_master=6
        UPDATE otrouting_master SET status='obsolete' WHERE id=6
        DELETE FROM otrouting_ways WHERE id_master=7
        DELETE FROM otrouting_points WHERE id_master=7
        UPDATE otrouting_master SET status='obsolete' WHERE id=7
        DELETE FROM otrouting_ways WHERE id_master=8
        DELETE FROM otrouting_points WHERE id_master=8
        UPDATE otrouting_master SET status='obsolete' WHERE id=8
    VACUUM ANALYZE otrouting_ways
    VACUUM ANALYZE otrouting_points

clean database - ['europe', 'france', 'rhone-alpes'] 1/1
------------------------------------------------------------------------------
2022-06-29 22:12:00
    DROP TABLE IF EXISTS _work_otrouting_osm_nodes_ninter
    DROP TABLE IF EXISTS planet_osm_*

------------------------------------------------------------------------------
2022-06-29 22:12:03



